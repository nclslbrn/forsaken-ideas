!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(r=o.key,s=void 0,"symbol"==typeof(s=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"))?s:String(s)),o)}var r,s}function i(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var s=[].concat(o("0123456789"),o(":/*|&#@$!<>"),o("{}[]+-_^~%?;()")),n=function(){function e(i){var o=this;t(this,e),this.element=i.element,this.trueText=i.element.innerText||i.element.innerHTML,this.numChar=this.trueText.length,this.effect=i.effect,this.curChar=0,this.biteChar="";for(var r=0;r<this.numChar;r++){var n=this.trueText.substr(r,1);this.biteChar+=n&&" "===n?" ":s[Math.floor(Math.random()*s.length)]}this.element.innerHTML="replace"==this.effect?this.biteChar:"";for(var l=0;l<=this.numChar;l++)setTimeout((function(){"add"===o.effect?o.addChar():"replace"===o.effect&&o.replaceChar()}),45*l)}return i(e,[{key:"replaceChar",value:function(){var t;t=this.curChar+1<this.numChar?s[Math.floor(Math.random()*s.length)]:"";var e=this.trueText.substr(0,this.curChar),i=this.biteChar.substr(this.curChar,this.numChar);this.element.innerHTML=e+t+i,this.element.dataset.text=e+t+i,this.curChar++}},{key:"addChar",value:function(){var t;t=this.curChar+1<this.numChar?s[Math.floor(Math.random()*s.length)]:"";var e=this.trueText.substr(0,this.curChar);this.element.innerHTML=e+t,this.element.dataset.text=e+t,this.curChar++}}]),e}(),l=function(){function e(i){t(this,e),this.parentElem=i.parentElem,this.dpi=void 0===i.dpi?150:i.dpi,this.background=void 0===i.background?"#ffffff":i.background,this.printFormat={A3_landscape:{w:42,h:29.7},A3_portrait:{w:29.7,h:42},A3_square:{w:29.7,h:29.7},A3_topSpiralNotebook:{w:29.7,h:40.5},A4_landscape:{w:29.7,h:21},A4_portrait:{w:21,h:29.7},P32x24:{w:32,h:24},P24x32:{w:24,h:32}},this.dpiToPix={72:30,150:59,300:118},this.namespace={inkscape:"http://www.inkscape.org/namespaces/inkscape",svg:"http://www.w3.org/2000/svg"},this.groups=[],void 0!==i.parentElem?(this.parentElem=i.parentElem,void 0!==this.printFormat[i.size]||void 0!==i.size.w&&void 0!==i.size.h?void 0!==this.dpiToPix[this.dpi]?i.size.w&&i.size.h?(this.width=i.size.w*this.dpiToPix[this.dpi],this.height=i.size.h*this.dpiToPix[this.dpi],this.size="".concat(i.size.w,"x").concat(i.size.h),this.printSize=i.size):this.printFormat[i.size]&&(this.width=this.printFormat[i.size].w*this.dpiToPix[this.dpi],this.height=this.printFormat[i.size].h*this.dpiToPix[this.dpi],this.size=i.size,this.printSize=this.printFormat[i.size]):console.log("DPI is not set to 72, 150 or 300, we cannot initialize <svg>."):console.log("Wrong format passed, possible options are : ",Object.keys(this.printFormat)," or custom size object {w: width, h: height}")):console.error("We can't found HTML element where to add the <svg>.")}return i(e,[{key:"init",value:function(){this.parentElem&&this.width&&this.height&&(this.elem=document.createElementNS(this.namespace.svg,"svg"),this.elem.setAttribute("version","1.1"),this.elem.setAttribute("xmlns",this.namespace.svg),this.elem.setAttribute("xmlns:svg",this.namespace.svg),this.elem.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.elem.setAttribute("xmlns:inkscape",this.namespace.inkscape),this.elem.setAttribute("width","".concat(this.printSize.w,"cm")),this.elem.setAttribute("height","".concat(this.printSize.h,"cm")),this.elem.setAttribute("viewBox","0 0 ".concat(this.width," ").concat(this.height)),this.elem.setAttribute("background",this.background),this.elem.setAttribute("style","background: ".concat(this.background,"; box-shadow: 0 0.5em 1em rgba(0,0,0,0.1);")),this.elem.style.aspectRatio="".concat(this.width," / ").concat(this.height),this.groups=[],this.parentElem.appendChild(this.elem),this.rect({x:0,y:0,w:this.width,h:this.height,fill:this.background}))}},{key:"clear",value:function(){for(;this.elem.firstChild;)this.elem.removeChild(this.elem.firstChild);this.groups=[]}},{key:"clearGroups",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.groups)if(!t||t.includes(e))for(;this.groups[e].firstChild;)this.groups[e].removeChild(this.groups[e].firstChild)}},{key:"appendToGroup",value:function(t,e){void 0!==this.groups||void 0!==this.groups[t]?void 0!==e?this.groups[t].appendChild(e):console.error("The SVG element is not set, and can't be added to group"):console.error("Group ".concat(t," doesn't exist."))}},{key:"rect",value:function(t){t.x=void 0===t.x?0:t.x,t.y=void 0===t.y?0:t.y,t.w=void 0===t.w?0:t.w,t.h=void 0===t.h?0:t.h,t.fill=void 0!==t.fill&&t.fill,t.stroke=void 0!==t.stroke&&t.stroke,t.group=void 0!==t.group&&t.group;var e=document.createElementNS(this.namespace.svg,"rect");e.setAttribute("x",t.x),e.setAttribute("y",t.y),e.setAttribute("width",t.w),e.setAttribute("height",t.h),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.group?this.appendToGroup(t.group,e):this.elem.appendChild(e)}},{key:"circle",value:function(t){t.x=void 0===t.x?0:t.x,t.y=void 0===t.y?0:t.y,t.r=void 0===t.r?0:t.r,t.fill=void 0!==t.fill&&t.fill,t.stroke=void 0!==t.stroke&&t.stroke,t.group=void 0!==t.group&&t.group;var e=document.createElementNS(this.namespace.svg,"circle");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.group?this.appendToGroup(t.group,e):this.elem.appendChild(e)}},{key:"triangle",value:function(t){if(void 0!==t.points)if(t.points.length<3)console.error("It seems that triangleProps.points doesn't have three points.");else{t.points.length>3&&console.error("Props.point contains more than 3 coordinates, triangle will only use the three first ones."),t.fill=void 0!==t.fill&&t.fill,t.stroke=void 0!==t.stroke&&t.stroke,t.close=void 0!==t.close&&t.close,t.name=void 0!==t.name&&t.name,t.group=void 0!==t.group&&t.group;var e=document.createElementNS(this.namespace.svg,"path");e.setAttribute("d","M "+t.points[0][0]+","+t.points[0][1]+"L "+t.points[1][0]+","+t.points[1][1]+"L "+t.points[2][0]+","+t.points[2][1]+"Z"),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.name&&e.setAttribute("name",t.name),t.group?this.appendToGroup(t.group,e):this.elem.appendChild(e)}else console.error("You must specify 3 points in property object to draw a triangle")}},{key:"path",value:function(t){if(void 0!==t.points){t.fill=void 0!==t.fill&&t.fill,t.stroke=void 0!==t.stroke&&t.stroke,t.strokeWidth=!(void 0===t.strokeWidth||Number(t.setAttr)>1)&&t.strokeWidth,t.close=void 0!==t.close&&t.close,t.name=void 0!==t.name&&t.name,t.group=void 0!==t.group&&t.group;var e=document.createElementNS(this.namespace.svg,"path"),i=t.points,o="";if(void 0!==i[0][0]&&void 0!==i[0][1]){o+="M ".concat(i[0][0]," ").concat(i[0][1]);for(var r=1;r<i.length;r++)void 0!==i[r][0]&&void 0!==i[r][1]&&(o+=" L".concat(i[r][0]," ").concat(i[r][1]))}t.close&&void 0!==i[0][0]&&void 0!==i[0][1]&&(o+=" L".concat(i[0][0]," ").concat(i[0][1])),e.setAttribute("d",o),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth),t.name&&e.setAttribute("name",t.name),t.group?this.appendToGroup(t.group,e):this.elem.appendChild(e)}else console.error("You must specify points coordinates to draw a line")}},{key:"text",value:function(t){if(void 0!==t.x)if(void 0!==t.y)if(void 0!==t.text){t.fontFamily=void 0===t.fontFamily?"sans-serif":t.fontFamily,t.fontSize=void 0===t.fontSize?16:t.fontSize,t.fill=void 0===t.fill?"black":t.fill,t.anchor=!(void 0===t.group||!["start","middle","end"].includes(t.anchor))&&t.anchor,t.name=void 0!==t.name&&t.name,t.group=void 0!==t.group&&t.group;var e=document.createElementNS(this.namespace.svg,"text");e.setAttribute("x",t.x),e.setAttribute("y",t.y),e.setAttribute("font-family",t.fontFamily),e.setAttribute("font-size",t.fontSize),e.setAttribute("fill",t.fill),t.name&&e.setAttribute("name",t.name),t.anchor&&e.setAttribute("text-anchor",t.anchor),e.innerHTML=t.text,t.group?this.appendToGroup(t.group,e):this.elem.appendChild(e)}else console.error("You need to specify the text that will be displayed");else console.error("You need to specify y property");else console.error("You need to specify x property")}},{key:"group",value:function(t){if(void 0!==t.name){t.fill=void 0!==t.fill&&t.fill,t.stroke=void 0!==t.stroke&&t.stroke,t.group=void 0!==t.group&&t.group,t.strokeWidth=void 0!==t.strokeWidth&&t.strokeWidth,t.id=void 0!==t.id&&"layer"+t.id;var e=document.createElementNS(this.namespace.svg,"g");t.name&&(e.setAttribute("name",t.name),e.setAttributeNS(this.namespace.inkscape,"inkscape:label",t.name),e.setAttributeNS(this.namespace.inkscape,"inkscape:groupmode","layer")),t.id&&e.setAttribute("id",t.id),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth),t.group?this.appendToGroup(t.group,e):this.elem.appendChild(e),this.groups[t.name]=e}else console.error("You must specified a name because you need it to fill group after created it")}},{key:"export",value:function(t){t.name=void 0===t.name?"untitled":t.name;var e=null,i=new Date,o=i.getFullYear(),r=i.getMonth(),s=i.getDay(),n=i.getHours(),l=i.getMinutes(),a="".concat(t.name,".").concat(this.size,".").concat(o,"-").concat(r,"-").concat(s,"_").concat(n,".").concat(l,".svg"),h='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n                            '.concat(this.elem.outerHTML),c=new Blob([h],{type:"application/xml"});null!==e&&window.URL.revokeObjectURL(e),e=window.URL.createObjectURL(c);var u=document.createElement("a");u.href=e,u.download=a,u.click()}},{key:"cmToPixels",value:function(t){if(!isNaN(t))return t*this.dpiToPix[this.dpi];console.error("The method cmToPixels() must be called with a number in centimeters.")}}]),e}(),a=function(){function e(i,o){t(this,e),this.cols=i,this.rows=o,this.value=[]}return i(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.35;this.value=[];for(var e=0;e<this.cols;e++)for(var i=0;i<this.rows;i++)this.value.push(Math.random()<t)}},{key:"update",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=[],i=0;i<=this.cols;i++)for(var o=0;o<=this.rows;o++){var r=this.cols*i+o,s=0;o>0&&this.value[r-1]&&s++,o<this.rows&&this.value[r+1]&&s++,i>0&&this.value[r-this.cols]&&s++,i<this.cols&&this.value[r+this.cols]&&s++,i>0&&o>0&&this.value[r-this.cols-1]&&s++,i<this.cols&&o>0&&this.value[r+this.cols-1]&&s++,i<this.cols&&o<this.rows&&this.value[r+this.cols+1]&&s++,i>0&&o<this.rows&&this.value[r-this.rows+1]&&s++,e.push(s===t)}this.value=[].concat(e)}}]),e}(),h=function(){function e(i,o){t(this,e),this.cols=i,this.rows=o}return i(e,[{key:"allCorners",value:function(t,e){return[[t,e],[2*this.cols-t,e],[t,2*this.rows-e],[2*this.cols-t,2*this.rows-e]]}},{key:"topLeftCorner",value:function(t,e){return[[[t,e],[t+1,e],[t,e+1]],[[2*this.cols-t,e],[2*this.cols-t+1,e],[2*this.cols-t+1,e+1]],[[t,2*this.rows-e],[t+1,2*this.rows-e+1],[t,2*this.rows-e+1]],[[2*this.cols-t+1,2*this.rows-e],[2*this.cols-t+1,2*this.rows-e+1],[2*this.cols-t,2*this.rows-e+1]]]}},{key:"topRightCorner",value:function(t,e){return[[[t,e],[t+1,e],[t+1,e+1]],[[2*this.cols-t,e],[2*this.cols-t+1,e],[2*this.cols-t,e+1]],[[t,2*this.rows-e+1],[t+1,2*this.rows-e],[t+1,2*this.rows-e+1]],[[2*this.cols-t,2*this.rows-e],[2*this.cols-t+1,2*this.rows-e+1],[2*this.cols-t,2*this.rows-e+1]]]}},{key:"bottomRightCorner",value:function(t,e){return[[[t+1,e],[t+1,e+1],[t,e+1]],[[2*this.cols-t,e],[2*this.cols-t+1,e+1],[2*this.cols-t,e+1]],[[t,2*this.rows-e],[t+1,2*this.rows-e],[t+1,2*this.rows-e+1]],[[2*this.cols-t,2*this.rows-e+1],[2*this.cols-t,2*this.rows-e],[2*this.cols-t+1,2*this.rows-e]]]}},{key:"bottomLeftCorner",value:function(t,e){return[[[t+1,e+1],[t,e+1],[t,e]],[[2*this.cols-t+1,e],[2*this.cols-t+1,e+1],[2*this.cols-t,e+1]],[[t,2*this.rows-e],[t+1,2*this.rows-e],[t,2*this.rows-e+1]],[[2*this.cols-t,2*this.rows-e],[2*this.cols-t+1,2*this.rows-e],[2*this.cols-t+1,2*this.rows-e+1]]]}}]),e}(),c=function(){function e(i,o,r){t(this,e),this.svg=i,this.mirror=o,this.cellSize=r}return i(e,[{key:"_d",value:function(t){return[t[0]*this.cellSize.w,t[1]*this.cellSize.h]}},{key:"fillCell",value:function(t,e,i){var o=this;this.mirror.allCorners(t,e).forEach((function(){var r=o._d([t,e]);o.svg.rect({x:r.x,w:o.cellSize.w,y:o.cellSize.h,group:i})}))}},{key:"topLeftTriangle",value:function(t,e,i){var o=this;this.mirror.topLeftCorner(t,e).forEach((function(t){var e=t.map((function(t){return o._d(t)}));o.svg.triangle({points:e,group:i})}))}},{key:"topRightTriangle",value:function(t,e,i){var o=this;this.mirror.topRightCorner(t,e).forEach((function(t){var e=t.map((function(t){return o._d(t)}));o.svg.triangle({points:e,group:i})}))}},{key:"bottomRightTriangle",value:function(t,e,i){var o=this;this.mirror.bottomRightCorner(t,e).forEach((function(t){var e=t.map((function(t){return o._d(t)}));o.svg.triangle({points:e,group:i})}))}},{key:"bottomLeftTriangle",value:function(t,e,i){var o=this;this.mirror.bottomLeftCorner(t,e).forEach((function(t){var e=t.map((function(t){return o._d(t)}));o.svg.triangle({points:e,group:i})}))}}]),e}(),u={46:{name:"Black",value:"#000"},95:{name:"Medium cold gray",value:"#a9c1d0"},59:{name:"Brigth lilac",value:"#bf86b7"},58:{name:"Lilac",value:"#c34bb4"},56:{name:"Rose",value:"#e2447c"},19:{name:"Purple",value:"#973060"},48:{name:"Carmine",value:"#ed404b"},45:{name:"Brown",value:"#a85e3f"},54:{name:"Orange",value:"#ec9543"},26:{name:"Light flesh tint",value:"#f6b9b8"},88:{name:"Light ocre",value:"#e5d47c"},44:{name:"Yellow",value:"#fef05d"},24:{name:"Fluorescent yellow",value:"#fff65c"},32:{name:"Ultramarine",value:"#232f8d"},31:{name:"Fluorescent blue",value:"#005ec7"},13:{name:"Ice green",value:"#5edfe9"},51:{name:"Turquoise blue",value:"#4cbad4"},36:{name:"Emerald green",value:"#5ac061"}},d=function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)t=e;else{var i=Object.keys(u);t=i[Math.floor(Math.random()*i.length)]}var o=u[t];return o.id=t,o},p=function(){function e(i,o){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dark",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.elem=document.createElement("p"),this.elem.id="notification","dark"==s||"light"==s?this.elem.classList.add(s):console.error("Undefined mode (".concat(s,"), possible options: dark & light.")),this.elem.innerHTML=i,void 0!==o?(this.parentElem=o,o.appendChild(this.elem),n&&window.setTimeout((function(){o.removeChild(r.elem)}),n)):(this.parentElem=!1,console.error("Parent elem doesn't exist."))}return i(e,[{key:"remove",value:function(){this.parentElem&&this.parentElem.removeChild(this.elem)}}]),e}(),v=document.getElementById("windowFrame"),f=document.getElementById("loading"),m={svg:new l({parentElem:document.getElementById("windowFrame"),size:"A4_portrait",dpi:150}),g:void 0,mirror:!1,palette:!1,cellSize:void 0,groupsByColor:[],plot:!1,neededAliveNeighboors:2,initPercentChanceAliveCell:.5,launch:function(){m.svg.init(),m.init()},init:function(){m.g=new a(8,12),m.cellSize={w:m.svg.width/(1+2*m.g.cols),h:m.svg.height/(1+2*m.g.rows)},m.mirror=new h(m.g.cols,m.g.rows),m.plot=new c(m.svg,m.mirror,m.cellSize),m.g.init(m.initPercentChanceAliveCell),m.changeColor(),m.g.update(m.neededAliveNeighboors),m.fillSvg()},update:function(){m.g.update(m.neededAliveNeighboors),m.g.value.reduce((function(t,e){return!(!e&&!t)}))||(new p("All cells died, the grid has been reinitialized.",m.svg.parentElem,"light"),m.g.init()),m.fillSvg()},fillSvg:function(){m.svg.clearGroups();for(var t=0;t<=m.g.cols;t++)for(var e=0;e<=m.g.rows;e++){var i=t*m.g.cols+e,o=i%m.palette.length;e>0&&e<m.g.rows&&m.g.value[i-m.g.rows]&&m.g.value[i+m.g.rows]&&(m.plot.topLeftTriangle(t,e,m.groupsByColor[o]),m.plot.fillCell(t,e,m.groupsByColor[o])),t>0&&t<m.g.cols&&m.g.value[i+m.g.cols]&&m.g.value[i-m.g.cols]&&(m.plot.bottomRightTriangle(t,e,m.groupsByColor[o]),m.plot.fillCell(t,e,m.groupsByColor[o])),t>0&&e>0&&m.g.value[i-1]&&m.g.value[i-m.g.cols]&&m.plot.topLeftTriangle(t-1,e-1,m.groupsByColor[o]),t<m.g.cols&&e>0&&m.g.value[i-1]&&m.g.value[i+m.g.cols]&&m.plot.topRightTriangle(t+1,e-1,m.groupsByColor[o]),t<m.g.cols&&e<m.g.rows&&m.g.value[i+1]&&m.g.value[i+m.g.cols]&&m.plot.bottomRightTriangle(t+1,e+1,m.groupsByColor[o]),t>0&&e<m.g.rows&&m.g.value[i+1]&&m.g.value[i-m.g.cols]&&m.plot.bottomLeftTriangle(t-1,e+1,m.groupsByColor[o])}},changeColor:function(){m.groupsByColor=[],m.svg.clear(),m.palette=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=[],i=[];for(t>=u.length&&console.log("We only have ",u.length-1," colors. Sorry.");e.length<t;){var o=d();i.includes(o.id)||e.push(o)}return console.log(e),e}(4),m.palette.forEach((function(t){var e=t.name.replace(" ","_").toLowerCase();m.svg.group({name:e,fill:t.value}),m.groupsByColor.push(e)})),m.fillSvg()},downloadSVG:function(){window.confirm("Do you want to download the SVG file ?")&&m.svg.export({name:"cells"})}},g=document.createElement("div");g.id="interactiveParameter";var w=document.createElement("button");w.innerText="▶ Update the grid",g.appendChild(w),w.addEventListener("click",(function(){m.update()}),!1);var b=document.createElement("button");b.innerText="🔄 Change color",g.appendChild(b),b.addEventListener("click",(function(){m.changeColor(),m.fillSvg()}),!1),m.launch(),v.removeChild(f),window.init=m.init,window.infobox=function(){var t=document.getElementById("infobox");null!=t&&t.classList.toggle("active")},window.downloadSVG=m.downloadSVG,v.appendChild(g),function(){window.openOffFrame=function(){document.body.classList.toggle("openedOffWindow");var t=document.getElementById("projectTitle");new n({element:t,effect:"add"})};var t=document.querySelectorAll("[data-action]");if(void 0!==t)for(var e=function(){var e=t[i].getAttribute("data-action");t[i].addEventListener("click",(function(){var t=window[e];"function"!=typeof t?console.log(e," is not defined"):t()}),!1)},i=0;i<t.length;i++)e()}()}();
