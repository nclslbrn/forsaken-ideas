!function(e){"use strict";function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var r=t(e);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"))?a:String(a)),i)}var n,a}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var s=function(){function e(t,r){i(this,e),this.cols=t,this.rows=r,this.value=[]}return a(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.35;this.value=[];for(var t=0;t<this.cols;t++)for(var r=0;r<this.rows;r++)this.value.push(Math.random()<e)}},{key:"update",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[],r=0;r<=this.cols;r++)for(var i=0;i<=this.rows;i++){var n=this.cols*r+i,a=0;i>0&&this.value[n-1]&&a++,i<this.rows&&this.value[n+1]&&a++,r>0&&this.value[n-this.cols]&&a++,r<this.cols&&this.value[n+this.cols]&&a++,r>0&&i>0&&this.value[n-this.cols-1]&&a++,r<this.cols&&i>0&&this.value[n+this.cols-1]&&a++,r<this.cols&&i<this.rows&&this.value[n+this.cols+1]&&a++,r>0&&i<this.rows&&this.value[n-this.rows+1]&&a++,t.push(a===e)}this.value=[].concat(t)}}]),e}(),l={grid:new s(12,12),neededAliveNeighboors:2,initPercentChanceAliveCell:.5,clock:new r.Clock,scene:new r.Scene,camera:new r.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,2e4),object:new r.Object3D,build:new r.Object3D,zRot:0,renderer:new r.WebGLRenderer({antialias:!0}),launch:function(e){l.controls=new r.OrbitControls(l.camera,l.renderer.domElement),l.controls.screenSpacePanning=!0,l.defaulMat=[new r.MeshBasicMaterial({color:16777215}),new r.MeshBasicMaterial({color:0,wireframe:!0,transparent:!0})],l.defaultGeometry=function(e,t,i){var n=new r.Shape;n.moveTo(0,0),n.lineTo(e,0),n.lineTo(0,t),n.lineTo(0,0);var a={steps:2,depth:i,evelEnabled:!0,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0};return new r.ExtrudeGeometry(n,a)}(1/l.grid.cols,1/l.grid.rows,1/l.grid.rows),l.object=r.SceneUtils.createMultiMaterialObject(l.defaultGeometry,l.defaulMat),l.renderer.setPixelRatio(window.devicePixelRatio),l.renderer.setSize(window.innerWidth,window.innerHeight),l.camera.position.z=Math.max(l.grid.cols,l.grid.rows)/4,l.camera.lookAt(0,0,0),e.appendChild(l.renderer.domElement),window.addEventListener("resize",l.onWindowResize,!1),l.init(),l.animate()},init:function(){l.grid.init(l.initPercentChanceAliveCell),l.grid.update(),l.scene.background=new r.Color(0),l.scene.fog=new r.Fog(0,.5,l.grid.rows),l.build.name="chrystal",l.drawgrid(),l.render()},onWindowResize:function(){l.camera.aspect=window.innerWidth/window.innerHeight,l.camera.updateProjectionMatrix(),l.renderer.setSize(window.innerWidth,window.innerHeight)},render:function(){l.renderer.render(l.scene,l.camera)},animate:function(){requestAnimationFrame(l.animate),l.zRot++,l.build.rotation.set(0,l.zRot/100,0),l.zRot%180==0&&(l.grid.update(),l.drawgrid()),void 0!==l.render&&l.render()},addMesh:function(e,t){var r=l.object.clone(!0);return r.position.set(.5/l.grid.cols+1/l.grid.cols*e,1/l.grid.rows*t,-.5/l.grid.cols),r.updateMatrix(),r},drawgrid:function(){l.build.clear(),l.scene.getObjectByName("chrystal")&&l.scene.remove(l.scene.getObjectByName("chrystal"));for(var e=new r.Group,t=0;t<=l.grid.cols;t++)for(var i=0;i<=l.grid.rows;i++){var n=t*l.grid.cols+i;i>0&&i<l.grid.rows&&l.grid.value[n-l.grid.rows]&&l.grid.value[n+l.grid.rows]&&e.add(l.addMesh(t,i)),t>0&&t<l.grid.cols&&l.grid.value[n+l.grid.cols]&&l.grid.value[n-l.grid.cols]&&e.add(l.addMesh(t,i)),t>0&&i>0&&l.grid.value[n-1]&&l.grid.value[n-l.grid.cols]&&e.add(l.addMesh(t-1,i-1)),t<l.grid.cols&&i>0&&l.grid.value[n-1]&&l.grid.value[n+l.grid.cols]&&e.add(l.addMesh(t+1,i-1)),t<l.grid.cols&&i<l.grid.rows&&l.grid.value[n+1]&&l.grid.value[n+l.grid.cols]&&e.add(l.addMesh(t+1,i+1)),t>0&&i<l.grid.rows&&l.grid.value[n+1]&&l.grid.value[n-l.grid.cols]&&e.add(l.addMesh(t-1,i+1))}var a=e.clone(!0);a.scale.set(-1,1,1);var o=e.clone(!0);o.rotation.set(0,Math.PI/2,0);var d=e.clone(!0);d.rotation.set(0,1.5*Math.PI,0);var s=new r.Group;s.add(e.clone(!0)),s.add(a.clone(!0)),s.add(o.clone(!0)),s.add(d.clone(!0)),s.scale.set(1,-1,1),l.build.add(e),l.build.add(a),l.build.add(o),l.build.add(d),l.build.add(s),l.scene.add(l.build)}},c=[].concat(o("0123456789"),o(":/*|&#@$!<>"),o("{}[]+-_^~%?;()")),u=function(){function e(t){var r=this;i(this,e),this.element=t.element,this.trueText=t.element.innerText||t.element.innerHTML,this.numChar=this.trueText.length,this.effect=t.effect,this.curChar=0,this.biteChar="";for(var n=0;n<this.numChar;n++){var a=this.trueText.substr(n,1);this.biteChar+=a&&" "===a?" ":c[Math.floor(Math.random()*c.length)]}this.element.innerHTML="replace"==this.effect?this.biteChar:"";for(var o=0;o<=this.numChar;o++)setTimeout((function(){"add"===r.effect?r.addChar():"replace"===r.effect&&r.replaceChar()}),45*o)}return a(e,[{key:"replaceChar",value:function(){var e;e=this.curChar+1<this.numChar?c[Math.floor(Math.random()*c.length)]:"";var t=this.trueText.substr(0,this.curChar),r=this.biteChar.substr(this.curChar,this.numChar);this.element.innerHTML=t+e+r,this.element.dataset.text=t+e+r,this.curChar++}},{key:"addChar",value:function(){var e;e=this.curChar+1<this.numChar?c[Math.floor(Math.random()*c.length)]:"";var t=this.trueText.substr(0,this.curChar);this.element.innerHTML=t+e,this.element.dataset.text=t+e,this.curChar++}}]),e}(),h=document.getElementById("windowFrame"),f=document.getElementById("loading");l.launch(h),h.removeChild(f),window.infobox=function(){var e=document.getElementById("infobox");null!=e&&e.classList.toggle("active")},window.init=l.init,function(){window.openOffFrame=function(){document.body.classList.toggle("openedOffWindow");var e=document.getElementById("projectTitle");new u({element:e,effect:"add"})};var e=document.querySelectorAll("[data-action]");if(void 0!==e)for(var t=function(){var t=e[r].getAttribute("data-action");e[r].addEventListener("click",(function(){var e=window[t];"function"!=typeof e?console.log(t," is not defined"):e()}),!1)},r=0;r<e.length;r++)t()}()}(THREE);
